S1im1 = im2double(imread('1_1.png'));
imwrite(S1im1,'S1-im1.png');
S1im1g = rgb2gray(S1im1);
S1im2 = im2double(imread('1_2.png'));
imwrite(S1im2,'S1-im2.png');
S1im2g = rgb2gray(S1im2);
S1fast = fastdetector(S1im1);
imwrite(S1fast,'S1-fast.png');
S1fast2 = fastdetector(S1im2);
S1fastr = sob(S1fast);
imwrite(S1fastr, 'S1-fastR.png');
S1fastr2 = sob(S1fast2);
[x, y] = match(S1fast,S1fast2);
S1fastmatch = showMatchedFeatures(S1im1, S1im2, x, y);
[x, y] = match(S1fastr,S1fastr2);
S1fastrmatch = showMatchedFeatures(S1im1, S1im2, x, y);
S1panorama = panorama(S1im2g, S1im1, S1im2, x, y);
imwrite(S1panorama,'S1-panorama.png');
%%
S2im1 = im2double(imread('2_1.png'));
imwrite(S2im1,'S2-im1.png');
S2im1g = rgb2gray(S2im1);
S2im2 = im2double(imread('2_2.png'));
imwrite(S2im2,'S2-im2.png');
S2im2g = rgb2gray(S2im2);
S2fast = fastdetector(S2im1);
imwrite(S2fast,'S2-fast.png');
S2fast2 = fastdetector(S2im2);
S2fastr = sob(S2fast);
imwrite(S1fastr, 'S2-fastR.png');
S2fastr2 = sob(S2fast2);
[x, y] = match(S2fast,S2fast2);
S2fastmatch = showMatchedFeatures(S2im1, S2im2, x, y);
[x, y] = match(S2fastr,S2fastr2);
S2fastrmatch = showMatchedFeatures(S2im1, S2im2, x, y);
S2panorama = panorama(S2im2g, S2im1, S2im2, x, y);
imwrite(S2panorama,'S2-panorama.png');
%%
S4im1 = im2double(imread('4_1.png'));
imwrite(S4im1,'S4-im2.png');
S4im1g = rgb2gray(S4im1);
S4im2 = im2double(imread('4_2.png'));
imwrite(S4im2,'S4-im2.png');
S4im2g = rgb2gray(S4im2);
S4fast = fastdetector(S4im1);
S4fast2 = fastdetector(S4im2);
S4fastr = sob(S4fast);
S4fastr2 = sob(S4fast2);
[x, y] = match(S4fast,S4fast2);
S4fastmatch = showMatchedFeatures(S4im1, S4im2, x, y);
[x, y] = match(S4fastr,S4fastr2);
S4fastrmatch = showMatchedFeatures(S4im1, S4im2, x, y);
S4panorama = panorama(S4im2g, S4im1, S4im2, x, y);
imwrite(S4panorama,'S4-panorama.png');
%%
S3im1 = im2double(imread('3_1.png'));
imwrite(S3im1,'S3-im1.png');
S3im1g = rgb2gray(S3im1);
S3im2 = im2double(imread('3_2.png'));
imwrite(S3im2,'S3-im2.png');
S3im2g = rgb2gray(S3im2);
S3fast = fastdetector(S3im1);
S3fast2 = fastdetector(S3im2);
S3fastr = sob(S3fast);
S3fastr2 = sob(S3fast2);
[x, y] = match(S3fast,S3fast2);
S3fastmatch = showMatchedFeatures(S3im1, S3im2, x, y);
[x, y] = match(S3fastr,S3fastr2);
S3fastrmatch = showMatchedFeatures(S3im1, S3im2, x, y);
S3panorama = panorama(S3im2g, S3im1, S3im2, x, y);
imwrite(S3panorama,'S3-panorama.png');
